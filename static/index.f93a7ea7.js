import{_ as B}from"./nuxt-link.8de5b910.js";import{_ as S,u as M,l as j,r as v,f as m,H as N,m as O,o as u,c as d,a as t,F as $,h as C,b as L,w as V,t as f,z as y,I as z,q as I,C as q,i as D}from"./entry.78f1c0a1.js";import{u as E}from"./vue.f36acd1f.af229a2c.js";const H={class:"xl:w-[1280px] md:w-[600px] py-5 m-auto",id:"products"},T={class:"grid xl:grid-cols-4 grid-cols-2 gap-10"},G={class:"absolute top-0 left-0 bg-red-500 p-1"},J={class:"w-full h-[250px]"},K=["src","alt"],Q={class:"mb-auto p-1 relative"},R={class:"my-2 text-base"},U=["onClick"],W={class:"text-center text-xl my-5"},X=["disabled"],Y=["onClick"],Z=["disabled"],ee={__name:"products",props:{option:{type:String,default:"ALL"}},setup(w){//! ----------宣告引入------------
const a=M();E({title:"蘭丸燒烤 | 商品列表",meta:[{name:"description",content:"description"}]});//! ----------變數------------
const c=j([]),l=v([]),_=v("ALL"),h=v(12),n=v(1),g=w;//! ----------功能------------
const o=e=>{a.favourite.some(x=>x.id===e.id)?a.removeFromFavourite(e):(console.log(e),a.addToFavourite(e),alert("已加入收藏")),stopPropagation()},p=m(()=>e=>{if(a.favourite)return a.favourite.some(i=>i.id===e)?"fa-solid":"fa-regular"}),r=m(()=>l.value.length<=0?Math.ceil(c.length/h.value):Math.ceil(l.value.length/h.value)),k=m(()=>{const e=(n.value-1)*h.value,i=n.value*h.value;//!篩選分類 如沒有篩出資料則顯示全部
const x=c.filter(s=>s.category.name===_.value);return l.value=[...x],l.value.length<=0?c.slice(e,i):l.value.slice(e,i)}),b=e=>{switch(!0){case e===-1:n.value--;break;case e===-2:n.value++;break;default:n.value=e;break}//! 拉至視窗上
document.querySelector("#products").scrollIntoView({behavior:"smooth"})},P=m(()=>e=>n.value===e?"bg-yellow-800":"");return N(()=>{_.value=g.option,n.value=1}),O(()=>{fetch("https://api.escuelajs.co/api/v1/products").then(e=>e.json()).then(e=>{c.push(...e)}).catch(e=>{console.log(e)})}),(e,i)=>{const x=B;return u(),d("section",H,[t("section",T,[(u(!0),d($,null,C(k.value,(s,F)=>(u(),d("div",{key:F,class:"relative w-full border-4 border-yellow-800"},[L(x,{to:{name:"products-id",params:{id:s.id}}},{default:V(()=>[t("span",G,f(s.category.name),1),t("div",J,[t("img",{src:s.images[0],alt:s.title,class:"w-full h-full object-cover object-center"},null,8,K)]),t("div",Q,[t("h3",R,f(s.title),1),t("span",null,"$"+f(s.price),1),t("span",null,[t("i",{class:y(["fa-heart absolute right-2 text-lg cursor-pointer text-red-500",p.value(s.id)]),onClick:z(A=>o(s),["stop","prevent"])},null,10,U)])])]),_:2},1032,["to"])]))),128))]),t("div",W,[t("button",{disabled:n.value===1,onClick:i[0]||(i[0]=s=>b(-1))},"＜",8,X),(u(!0),d($,null,C(r.value,(s,F)=>(u(),d("button",{key:s,class:y(["mx-3 rounded-lg px-2",P.value(s)]),onClick:A=>b(s)},f(s),11,Y))),128)),t("button",{disabled:n.value===r.value,onClick:i[1]||(i[1]=s=>b(-2))}," ＞ ",8,Z)])])}}},te=S(ee,[["__scopeId","data-v-4ca6732d"]]);const se={key:0,class:"border-4 border-yellow-800"},oe={class:"text-center px-5 xl:!block"},ne=["onClick"],le={__name:"silder",emits:["option"],setup(w,{emit:a}){const c=j([]),l=v(""),_=v(!1),h=a,n=o=>{h("option",o),l.value=o},g=m(()=>o=>l.value===o?"bg-yellow-900":"");return O(()=>{fetch("https://api.escuelajs.co/api/v1/products").then(o=>o.json()).then(o=>{const p=new Set(o.map(r=>r.category.name));c.push(...p)}).catch(o=>{console.log(o)})}),(o,p)=>c.length>0?(u(),d("div",se,[t("h2",{class:"text-2xl bg-yellow-800 text-center py-2 cursor-pointer xl:cursor-default",onClick:p[0]||(p[0]=r=>_.value=!_.value)}," 類別 "),I(t("ul",oe,[t("li",{class:y(["my-3 p-1 rounded-xl",g.value("ALL")])},[t("p",{onClick:p[1]||(p[1]=r=>n("ALL"))},"全部")],2),(u(!0),d($,null,C(c,(r,k)=>(u(),d("li",{key:k,class:y(["my-3 px-3 py-1 rounded-xl",g.value(r)])},[t("p",{onClick:b=>n(r)},f(r),9,ne)],2))),128))],512),[[q,_.value]])])):D("",!0)}},ae=S(le,[["__scopeId","data-v-2bdcd6bb"]]),ce={class:"xl:flex justify-center items-center xl:w-[1280px] md:w-[600px] m-auto xl:gap-20 xl:py-5"},re={class:"relative xl:w-[15%]"},pe={__name:"index",setup(w){const a=v(""),c=l=>{a.value=l};return(l,_)=>(u(),d("section",ce,[t("div",re,[L(ae,{class:"xl:fixed top-[12%]",onOption:c})]),L(te,{option:a.value,class:"p-10 xl:p-0"},null,8,["option"])]))}};export{pe as default};
