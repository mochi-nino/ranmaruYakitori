import{k as H,u as L,r as p,l as b,f as y,m as z,c as o,b as r,w as m,n as A,o as a,a as e,q as w,v as D,F as v,h as f,t as u,s as _,x as G,i as T,d as q,y as J,E as K}from"./entry.c7e37595.js";import{_ as Q}from"./nuxt-link.4ba1f96a.js";import{u as W}from"./vue.f36acd1f.fe5c47bb.js";import{b as j}from"./button.45109d97.js";const X={class:"xl:w-[1280px] m-auto py-10"},Z={class:"w-[80%] mx-auto"},ee=e("h2",{class:"text-3xl text-center bg-yellow-900/75 py-3"},"配送",-1),te={class:"bg-white p-16 flex items-center gap-5 mb-5"},se=e("label",{for:"homeDelivery",class:"text-lg"},"宅配",-1),le=e("h2",{class:"text-3xl text-center bg-yellow-900/75 py-3"},"付款",-1),oe={class:"bg-white p-16"},ae=["value","id"],re=["for"],ne={key:0},ie={class:"grid grid-cols-[150px,1fr] gap-2 items-center justify-center mb-4"},ce=e("label",{class:"text-right"},"信用卡卡號：",-1),de={key:0,class:"grid grid-cols-[150px,1fr] gap-2 items-center justify-center mb-4"},ue=e("div",null,null,-1),pe=e("p",{class:"text-red-500"},"卡號格式錯誤",-1),me=[ue,pe],_e={class:"grid grid-cols-[150px,1fr] gap-2 items-center justify-center mb-4"},xe=e("label",{class:"text-right"},"有效期限：",-1),he=e("option",{value:"default",disabled:""},"月",-1),ye=["value"],ve=e("option",{value:"default",disabled:""},"年",-1),fe=["value"],ge={class:"grid grid-cols-[150px,1fr] gap-2 items-center justify-center mb-4"},be=e("label",{class:"text-right"},"安全碼：",-1),we=e("h2",{class:"text-3xl text-center bg-yellow-900/75 py-3 mt-5"}," 填寫資料 ",-1),ke={class:"bg-gray-200 flex justify-center items-center flex-col gap-10 p-16"},Ve=["for"],Ie={class:"bg-yellow-900/75 py-5 text-lg mt-5"},Me={class:"w-[150px] ml-auto"},De={class:"flex items-center gap-2 m"},Te=e("p",{class:"text-white"},"小計：",-1),qe={class:"text-white"},je={class:"flex items-center gap-2 my-5"},Fe=e("p",{class:"text-white"},"運費：",-1),Ne={class:"text-white"},Pe={class:"flex items-center gap-2"},Be=e("p",{class:"text-white"},"總計：",-1),Ee={class:"text-white"},Ue={class:"text-right mt-5"},Ye={__name:"[id]",setup(Se){const F=H(),g=L(),x=p("宅配"),N=b([{type:"貨到付款"},{type:"信用卡"}]),c=p(""),i=p(""),k=p("default"),V=p("default"),P=b(["01","02","03","04","05","06","07","08","09","10","11","12"]),B=b([{title:"收件人",type:"text",name:"recipient",rules:"required"},{title:"Email",type:"email",name:"email",rules:"required|email"},{title:"手機號碼",type:"text",name:"phoneNumber",rules:"required|min:10|max:10"},{title:"收件地址",type:"text",name:"address",rules:"required"}]),I=p(0),E=y(()=>{let l=new Date().getFullYear(),s=[l];for(let n=0;n<15;n++)l+=1,s.push(l);return s}),U=y(()=>c.value==="信用卡"),S=l=>{l||(i.value=i.value.replace(/[^0-9]/g,""))},M=y(()=>{if(x.value==="宅配")return 60}),$=y(()=>{const l=g.cartTotalPrice.value+M.value;return I.value=l,l}),C=l=>{if(!c.value)alert("請選擇付款方式");else if(c.value==="信用卡"&&i.value.length<16)alert("信用卡格式錯誤");else{const s={...l},n={paymentMethod:c.value,deliveryMethod:x.value,orderTotalPrice:I.value};if(Object.assign(s,n),console.log(s),c.value==="信用卡"){const h={cardID:i.value};Object.assign(s,h)}g.getBuyerInfo(s),localStorage.removeItem("cart"),F.push("/cart/payment/finsh")}};return W({title:"蘭丸燒烤 | 付款",meta:[{name:"description",content:"description"}]}),z(()=>{}),(l,s)=>{const n=J,h=K,O=Q,R=A;return a(),o("section",X,[r(R,{onSubmit:C},{default:m(()=>[e("div",Z,[ee,e("div",te,[w(e("input",{type:"radio",value:"宅配",class:"w-[18px] h-[18px] rounded-[50px]",id:"homeDelivery","onUpdate:modelValue":s[0]||(s[0]=t=>x.value=t)},null,512),[[D,x.value]]),se]),le,e("ul",oe,[(a(!0),o(v,null,f(N,(t,d)=>(a(),o("li",{key:d,class:"flex items-center gap-5 mb-5"},[w(e("input",{type:"radio",value:t.type,"onUpdate:modelValue":s[1]||(s[1]=Y=>c.value=Y),name:"payType",class:"w-[18px] h-[18px] rounded-[50px]",id:t.type},null,8,ae),[[D,c.value]]),e("label",{for:t.type,class:"text-lg"},u(t.type),9,re)]))),128)),_(U)?(a(),o("li",ne,[e("div",ie,[ce,w(e("input",{type:"text",name:"cardID",placeholder:"請輸入卡號",label:"卡號",maxlength:"16",rules:"required","onUpdate:modelValue":s[2]||(s[2]=t=>i.value=t),onInput:s[3]||(s[3]=t=>S(0)),class:"xl:w-[300px] h-[40px] px-2 py-4 text-black border border-gray-400/50"},null,544),[[G,i.value]])]),i.value.length<16&&i.value.length!==0?(a(),o("div",de,me)):T("",!0),e("div",_e,[xe,e("div",null,[r(n,{name:"mounth",as:"select",class:"text-black border border-gray-400/50 mr-2",modelValue:V.value,"onUpdate:modelValue":s[4]||(s[4]=t=>V.value=t),rules:"required",label:"月份"},{default:m(()=>[he,(a(!0),o(v,null,f(P,(t,d)=>(a(),o("option",{key:d,value:t},u(t),9,ye))),128))]),_:1},8,["modelValue"]),r(n,{name:"years",class:"text-black border border-gray-400/50",modelValue:k.value,"onUpdate:modelValue":s[5]||(s[5]=t=>k.value=t),as:"select",label:"年份"},{default:m(()=>[ve,(a(!0),o(v,null,f(_(E),(t,d)=>(a(),o("option",{key:d,value:t},u(t),9,fe))),128))]),_:1},8,["modelValue"])])]),e("div",ge,[be,e("div",null,[r(n,{type:"text",name:"number",placeholder:"安全碼",label:"安全碼",maxlength:"4",rules:"required|max:4",class:"w-[100px] h-[40px] px-2 py-4 text-black border border-gray-400/50"}),r(h,{name:"number",class:"text-red-500 ml-2"})])])])):T("",!0)]),we,e("ul",ke,[(a(!0),o(v,null,f(B,(t,d)=>(a(),o("li",{class:"",key:d},[e("label",{for:t.title,class:"xl:w-[80px] inline-block text-right mr-2"},u(t.title)+"：",9,Ve),r(n,{type:t.type,name:t.name,placeholder:t.title,id:t.name,label:t.title,rules:t.rules,class:"w-[300px] h-[45px] px-2 py-4 text-black border border-gray-400/50 xl:w-[350px]"},null,8,["type","name","placeholder","id","label","rules"]),r(h,{name:t.name,class:"text-red-500 block xl:mx-24"},null,8,["name"])]))),128))]),e("div",Ie,[e("ol",Me,[e("li",De,[Te,e("p",qe,"$"+u(_(g).cartTotalPrice),1)]),e("li",je,[Fe,e("p",Ne,"$"+u(_(M)),1)]),e("li",Pe,[Be,e("p",Ee,"$"+u(_($)),1)])])]),e("div",Ue,[r(O,{to:"/cart/"},{default:m(()=>[r(j,{class:"mt-5 mr-5"},{default:m(()=>[q("返回")]),_:1})]),_:1}),r(j,{class:"mt-5 mr-5"},{default:m(()=>[q("送出")]),_:1})])])]),_:1})])}}};export{Ye as default};
