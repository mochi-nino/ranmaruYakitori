import{_ as B}from"./nuxt-link.912060e2.js";import{_ as S,f as M,h as F,r as v,i as m,I as N,j as O,o as u,c as d,a as t,l as $,m as C,b as L,w as V,t as f,q as y,J as I,k as q,s as z,x as D}from"./entry.eef69a39.js";import{u as E}from"./vue.f36acd1f.f4ab355f.js";const T={class:"xl:w-[1280px] md:w-[600px] py-5 m-auto",id:"products"},H={class:"grid xl:grid-cols-4 grid-cols-2 gap-10"},J={class:"absolute top-0 left-0 bg-red-500 p-1"},G={class:"w-full h-[250px]"},K=["src","alt"],Q={class:"mb-auto p-1 relative"},R={class:"my-2 text-base"},U=["onClick"],W={class:"text-center text-xl my-5"},X=["disabled"],Y=["onClick"],Z=["disabled"],ee={__name:"products",props:{option:{type:String,default:"ALL"}},setup(k){//! ----------宣告引入------------
const a=M();E({title:"蘭丸燒烤 | 商品列表",meta:[{name:"description",content:"description"}]});//! ----------變數------------
const c=F([]),l=v([]),p=v("ALL"),x=v(12),n=v(1),g=k;//! ----------功能------------
const o=e=>{a.favourite.some(h=>h.id===e.id)?a.removeFromFavourite(e):(console.log(e),a.addToFavourite(e),alert("已加入收藏")),stopPropagation()},_=m(()=>e=>{if(a.favourite)return a.favourite.some(i=>i.id===e)?"fa-solid":"fa-regular"}),r=m(()=>l.value.length<=0?Math.ceil(c.length/x.value):Math.ceil(l.value.length/x.value)),w=m(()=>{const e=(n.value-1)*x.value,i=n.value*x.value;//!篩選分類 如沒有篩出資料則顯示全部
const h=c.filter(s=>s.category.name===p.value);return l.value=[...h],l.value.length<=0?c.slice(e,i):l.value.slice(e,i)}),b=e=>{switch(!0){case e===-1:n.value--;break;case e===-2:n.value++;break;default:n.value=e;break}//! 拉至視窗上
document.querySelector("#products").scrollIntoView({behavior:"smooth"})},P=m(()=>e=>n.value===e?"bg-yellow-800":"");return N(()=>{p.value=g.option,n.value=1}),O(()=>{fetch("https://api.escuelajs.co/api/v1/products").then(e=>e.json()).then(e=>{c.push(...e)}).catch(e=>{console.log(e)})}),(e,i)=>{const h=B;return u(),d("section",T,[t("section",H,[(u(!0),d($,null,C(w.value,(s,j)=>(u(),d("div",{key:j,class:"relative w-full border-4 border-yellow-800"},[L(h,{to:{name:"products-id",params:{id:s.id}}},{default:V(()=>[t("span",J,f(s.category.name),1),t("div",G,[t("img",{src:s.images[0],alt:s.title,class:"w-full h-full object-cover object-center"},null,8,K)]),t("div",Q,[t("h3",R,f(s.title),1),t("span",null,"$"+f(s.price),1),t("span",null,[t("i",{class:y(["fa-heart absolute right-2 text-lg cursor-pointer text-red-500",_.value(s.id)]),onClick:I(A=>o(s),["stop","prevent"])},null,10,U)])])]),_:2},1032,["to"])]))),128))]),t("div",W,[t("button",{disabled:n.value===1,onClick:i[0]||(i[0]=s=>b(-1))},"＜",8,X),(u(!0),d($,null,C(r.value,(s,j)=>(u(),d("button",{key:s,class:y(["mx-3 rounded-lg px-2",P.value(s)]),onClick:A=>b(s)},f(s),11,Y))),128)),t("button",{disabled:n.value===r.value,onClick:i[1]||(i[1]=s=>b(-2))}," ＞ ",8,Z)])])}}},te=S(ee,[["__scopeId","data-v-4ca6732d"]]);const se={key:0,class:"border-4 border-yellow-800"},oe={class:"text-center px-5 xl:!block"},ne=["onClick"],le={__name:"slider",emits:["option"],setup(k,{emit:a}){const c=F([]),l=v(""),p=v(!1),x=a,n=o=>{x("option",o),l.value=o},g=m(()=>o=>l.value===o?"bg-yellow-900":"");return O(()=>{fetch("https://api.escuelajs.co/api/v1/products").then(o=>o.json()).then(o=>{const _=new Set(o.map(r=>r.category.name));c.push(..._)}).catch(o=>{console.log(o)})}),(o,_)=>c.length>0?(u(),d("div",se,[t("h2",{class:"text-2xl bg-yellow-800 text-center py-2 cursor-pointer xl:cursor-default",onClick:_[0]||(_[0]=r=>p.value=!p.value)}," 類別 "),q(t("ul",oe,[t("li",{class:y(["my-3 p-1 rounded-xl",g.value("ALL")])},[t("p",{onClick:_[1]||(_[1]=r=>n("ALL"))},"全部")],2),(u(!0),d($,null,C(c,(r,w)=>(u(),d("li",{key:w,class:y(["my-3 px-3 py-1 rounded-xl",g.value(r)])},[t("p",{onClick:b=>(n(r),p.value=!1)},f(r),9,ne)],2))),128))],512),[[z,p.value]])])):D("",!0)}},ae=S(le,[["__scopeId","data-v-a3cdb461"]]),ce={class:"xl:flex justify-center items-center xl:w-[1280px] md:w-[600px] m-auto xl:gap-20 xl:py-5 xl:px-1"},re={class:"relative xl:w-[15%]"},pe={__name:"index",setup(k){const a=v(""),c=l=>{a.value=l};return(l,p)=>(u(),d("section",ce,[t("div",re,[L(ae,{class:"xl:fixed top-[15%]",onOption:c})]),L(te,{option:a.value,class:"p-10 xl:p-0"},null,8,["option"])]))}};export{pe as default};
